<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Somnia Airdrop Qualification Check</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #f8fafc;
      margin: 0;
      padding: 40px 16px;
      text-align: center;
    }
    h1 { margin: 0 0 12px; font-size: 28px; }
    .sub { color:#cbd5e1; font-size:14px; margin-bottom: 24px; }
    .card {
      max-width: 560px; margin: 0 auto; background:#111827; 
      border:1px solid #1f2937; border-radius:12px; padding:20px;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
    }
    input {
      width:100%; padding:12px; border-radius:8px; border:1px solid #374151;
      background:#0b1220; color:#fff; outline:none;
    }
    button {
      margin-top:12px; width:100%; padding:12px; border:none; border-radius:8px;
      background:#3b82f6; color:#fff; font-weight:bold; cursor:pointer;
    }
    button:disabled { background:#475569; cursor:not-allowed; }
    .result { margin-top:16px; font-size:16px; padding:10px; border-radius:8px; display:none; }
    .ok { background:#052e1a; color:#22c55e; }
    .bad { background:#3b0d0d; color:#ef4444; }
    .progress-wrap { margin-top:20px; }
    .bar-box {
      width:100%; height:22px; background:#1e293b; border-radius:999px;
      overflow:hidden; border:1px solid #334155;
    }
    .bar { height:100%; width:100%; background:#22c55e; transition: width 1s linear, background-color .5s ease; }
    .countdown { margin-top:10px; font-size:14px; color:#cbd5e1; }
    .deadline { margin-top:6px; font-size:12px; color:#94a3b8; }
  </style>
</head>
<body>
  <h1>Somnia Airdrop Qualification Check</h1>
  <div class="sub">Global timer — ends for everyone at the same time.</div>

  <div class="card">
    <label for="wallet" style="display:block; text-align:left; color:#cbd5e1; margin-bottom:8px;">Enter wallet address</label>
    <input id="wallet" type="text" placeholder="Paste your wallet address" />
    <button id="checkBtn" onclick="checkEligibility()">Check</button>

    <div id="result" class="result"></div>

    <div class="progress-wrap">
      <div class="bar-box">
        <div id="bar" class="bar"></div>
      </div>
      <div id="countdown" class="countdown"></div>
      <div id="deadline" class="deadline"></div>
    </div>
  </div>

  <script>
    // --- Global end time (fixed when the file was generated) ---
    const START_TIME = 1756372205203;   // unix ms
    const END_TIME = 1756458605203;       // unix ms
    const TOTAL = END_TIME - START_TIME;

    // Eligible addresses (case-insensitive), each with a slightly different decimal
    const ELIGIBLE = new Map([
      ["yijksmgrz6xgwjyprfnstfdvvmeq24rnvp2rd8jxwei3", 50.55],
      ["0xc6f9b1400459df089436c8f7373cb8712cbd7531".toLowerCase(), 50.87],
      ["0xc707e38520a18f05bdf560f175c58f41fd2f8db8".toLowerCase(), 50.12],
    ]);

    const resultEl = document.getElementById("result");
    const barEl = document.getElementById("bar");
    const btn = document.getElementById("checkBtn");
    const countdownEl = document.getElementById("countdown");
    const deadlineEl = document.getElementById("deadline");

    function fmt(n) { return String(n).padStart(2,'0'); }

    function renderDeadline() {
      // Show absolute end time in user's local timezone
      const end = new Date(END_TIME);
      const y = end.getFullYear();
      const m = fmt(end.getMonth()+1);
      const d = fmt(end.getDate());
      const hh = fmt(end.getHours());
      const mm = fmt(end.getMinutes());
      const ss = fmt(end.getSeconds());
      deadlineEl.textContent = `Ends at: ${y}-${m}-${d} ${hh}:${mm}:${ss} (your time)`;
    }

    function tick() {
      const now = Date.now();
      const remaining = Math.max(0, END_TIME - now);
      const percent = Math.max(0, Math.min(100, (remaining / TOTAL) * 100));

      // progress width
      barEl.style.width = percent + "%";

      if (remaining > 0) {
        const h = Math.floor(remaining / 3600000);
        const m = Math.floor((remaining % 3600000) / 60000);
        const s = Math.floor((remaining % 60000) / 1000);
        countdownEl.textContent = `${fmt(h)}h ${fmt(m)}m ${fmt(s)}s remaining`;
      } else {
        countdownEl.textContent = "Expired";
        barEl.style.width = "100%";
        barEl.style.backgroundColor = "#dc2626"; // red
        btn.disabled = true;
      }
    }

    function checkEligibility() {
      const raw = document.getElementById("wallet").value || "";
      const addr = raw.trim().toLowerCase();
      const amount = ELIGIBLE.get(addr);

      resultEl.style.display = "block";

      if (Date.now() >= END_TIME) {
        resultEl.className = "result bad";
        resultEl.textContent = "Expired — checking disabled.";
        return;
      }

      if (amount) {
        resultEl.className = "result ok";
        resultEl.textContent = `You are eligible: ${amount.toFixed(2)} Somnia`;
      } else {
        resultEl.className = "result bad";
        resultEl.textContent = "Not eligible";
      }
    }

    renderDeadline();
    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
